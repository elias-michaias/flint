// Test multiple queries to trigger use-after-free
// First query consumes the resource, second query should fail

// Define basic types
item :: type of atom.
customer :: type of atom.

// Define specific items and customers
bread :: item.
alice :: customer.

// Define predicates
has_item :: item -> type.
owns :: customer -> item -> type.
double_owns :: customer -> item -> type.

// Linear resource - will be consumed by first query
resource1 :: has_item(bread).

// First rule that consumes the resource
take_rule :: 
    has_item($item) 
    => owns(alice, $item).

// Second rule that tries to use the same resource
double_take_rule :: 
    has_item($item) 
    => double_owns(alice, $item).
    
main ::
    owns(alice, bread).
    double_owns(alice, bread).
